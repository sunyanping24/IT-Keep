<!-- TOC -->

- [为什么使用数据库连接池](#为什么使用数据库连接池)
- [几种常用的数据库连接池](#几种常用的数据库连接池)
  - [`Druid`](#druid)
  - [`Hikari`](#hikari)

<!-- /TOC -->

# 为什么使用数据库连接池
![数据库连接池使用](/ASSET/数据库连接池有无对比.png)

- 不使用数据库连接池的步骤：

1. TCP建立连接的三次握手
2. MySQL认证的三次握手
3. 真正的SQL执行
4. MySQL的关闭
5. TCP的四次握手关闭

- 使用数据库连接池

第一次访问的时候，需要建立连接。 但是之后的访问，均会复用之前创建的连接，直接执行SQL语句。

- 使用连接池注意的几点

1. 连接池的分配与释放
2. 事务的处理：多个线程，使用同一个连接时，存在事务问题。推荐一个连接只能一个线程使用。
3. 并发问题导致的事务问题，可以使用同步机制来控制

- 使用连接池的几个重要参数

1. 最小连接数
2. 最大连接数
3. 最大空闲时间
4. 获取连接超时时间
5. 超时重试连接次数


# 几种常用的数据库连接池

## `Druid`

1. `Druid`是阿里开源的项目，中文文档比较全面，其最大的优势是**JDBC层的监控**。
2. `DruidDataSource`的性能也是非常不错，好于`c3p0`、`dbcp`、`jboss`等常用的组件。
3. `Druid`能够监控执行时间、事务时间、返回行数、更新行数、最大并发、耗时区间分布等，共一百多个监控指标。
4. 功能全面，适合大型项目中使用。

## `Hikari`

1. 性能强劲，并且也稳定。整个工程简单瘦小。非常适合在小中型的项目中使用。比如现在流行的微服务开发。