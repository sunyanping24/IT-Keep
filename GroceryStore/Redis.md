# Redis的几种数据结构

Redis是key-value存储结构的数据库、缓存、消息中间件。但是他并不是一个简单的key-value存储。实际上他是一个数据结构服务器，支持不同类型的值。一般常用的几种数据结构类型如下几种:

- String

- List：有序列表（按照存储顺序）

- Hash

- ZSet：集合（无序）

# Redis的Key

通常要使用统一的命名规则，良好的命名规范不仅可以减少资源的浪费，更能保证程序的良好维护。

- 太长的键尽量避免，不要超过1024k，这种不仅消耗内存，而且这类键值的计算成本很高。

- 坚持一种好的模式。例如：`token:id`,`user:100:password`,`area-code` 等

# 单线程的Redis为什么很快

- 缓存穿透

一般缓存数据会这样做：对于热点数据，在查询时缓存中不存在，则会在数据库中查询，同时会将数据存储在缓存中，当再次查询时缓存中存在，则通过缓存来查询，以减少数据库压力。但是某些数据在数据库中不存在，却在频繁的查询，那也不会存储在缓存中，就会一直绕过缓存来查询数据。这通常会出现在恶意攻击的程序中。这种情况称之为缓存穿透。

- 缓存雪崩

指在某一之间段内，缓存集中过期失效。

- 缓存击穿

指一个key非常热点，不停的扛着大并发，当这个key在失效的瞬间，持续的大并发就被穿破缓存，直接请求数据库。这就像屏幕被凿开了一个洞，所以叫缓存击穿。

**单线程的Redis为什么这么快**

1. 为什么redis是单线程的

官方设计Redis是基于内存操作的所以，所以CPU并不会成为瓶颈，所以就选择单线程，这样更加容易实现。

2. 为什么快

（1）完全基于内存操作
（2）数据结构简单，操作效率更高
（3）单线程操作，避免了线程不必要的上下文切换和竞争条件，也避免了线程切换对CPU的消耗，当然不存在数据竞争问题避免了锁机制的性能消耗
（4）多路I/O复用模型：“多路”指的是多个连接，“复用”指的是用同一个线程。