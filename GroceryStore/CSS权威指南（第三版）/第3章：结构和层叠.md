> 每个合法的文档都会生成一个结构树。只要有了这个结构树就能根据元素的祖先、属性、兄弟元素等创建选择器来选择元素。只要有了结构树，选择器才能起作用（这也是CSS的一个核心--继承）。  
CSS的3种机制：特殊性、继承、层叠。其中和文档结构树关系最大的就是继承和层叠。

## 特殊性

同一个元素，有多个规则选择，一个被选择的元素同样的样式只能是某一种。例如只能是一种颜色。那在多个规则选择时，哪个规则更强。这就在每个样式规则的选择器的**特殊性**上。

选择器的特殊性由选择器本身的组件确定。特殊性值表述为4个部分：`0，0，0，0`

- ID选择器： 0，1，0，0
- 类选择器、属性选择器、伪类选择器：0，0，1，0
- 元素选择器、伪元素选择器：0，0，0，1
- 通配选择器没有特殊性
- 内联样式：1，0，0，0

```
h1 {color: red; }  // specificity=0,0,0,1
p em {color: purple; }  // specificity=0,0,0,2
.grape {color: purple; }  // specificity=0,0,1,0
*.grape(color: yellow; )  /*specificity=0,0,1,0*/
p.bright em.drak {color: maroon}  /*specificity=0,0,2,2*/
#id216P{color:blue; }  /*specificity=0,1,0,0*/
div#sidebar *[href] {color: silver;} /*specificity=0,1,1,1*/
```
**重要性**

有时某个声明非常重要，超过了其他的声明。这个声明的结束分号之前插入`!important` 来标志

## 继承

因为文档的树结构，样式之间存在继承性。继承也是CSS种组基本的内容之一，除非由必要的理由，否则一般情况不会特别考虑。

注意：有些属性不能继承（例如）：`border`  

## 层叠

特殊性相等的两个规则同时应用到一个元素，如何解决这个冲突？

层叠样式表的层叠规则相当简单：

1. 找出与一个给定元素匹配的选择器的所有规则
2. 按显示权重对应用到该元素的所有声明排序
3. 按特殊性对应用到该元素的所有声明排序
4. 按出现顺序对应用到该元素的多有声明排序






