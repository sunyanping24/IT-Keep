> 每个元素都会生成一个或者多个矩形框，这成为元素框。未来的规范中可能允许非矩形的框，但是目前的规范中都是矩形框。各元素框中心有一个内容区。这个内容区周围有可选的内边距、边框、外边距。这些之所以被认为是可选的，是因为他们的宽度可以设置为0.

![元素的基本框](../../STORAGE/元素的基本框.jpg)

**包含块**

每个元素都相对于包含块摆放，包含块就是一个元素的“布局上下文”.
下面的这段HTML结构中`<p>`的包含块就是`<div>`,`<div>`的包含块就是`<body>`。`<p>`的布局依赖于`<div>`,`<div>`的布局依赖于`<body>`。

<u>行内元素的摆放方式并不直接依赖于包含块。</u>

```
<body>
  <div>
    <p></p>
  </div>
</body>
```

**几个术语概念**

- 正常流：语言文本从左到右，从上到下。HTML文档的文本布局就是这样。

- 非替换元素：如果元素的内容包含在文档之中，则称之为非替换元素。

- 替换元素：指用作为其他内容占位符的一个元素。比如`<img>`元素，他只是指向一个图像文件，这个文件将插入到文档流中该`<img>`元素本身所在位置。

- 块级元素：`display: block`会让元素生成块级框。

- 行内元素：不会再元素前后生成 行分隔符，通过`display: inline `可以让元素变为一个行内框。

- 根元素：文档树顶端的元素

## 块级元素

![完整的框模型](../../STORAGE/完整的框模型.png)

### 水平格式化

**简单的规则：正常流中块级元素框的水平部分总和就等于父元素的width**

1. 水平属性

`margin-left`、`border-left`、`padding-left`、`width`、`padding-right`、`border-right`、`margin-right`这些属性与块级框的
水平布局有关。这7个属性加起来必须是元素包含块的宽度。

这7个元素中只有3个元素可以设置为auto：元素内容的宽度、左外边距、右外边距

当这其中有值设置为auto的时候，其他的值会自动确认，以填充父元素的宽度。

但是如果这3个值都设置为固定的某个值的时候，CSS中认为这是过分受限，会自动将外边距的值置为auto。对于从左向右读的语言，是重置左外边距，
对于从右向左读的语言，刚好相反。

如果这三个值都设置为auto的话，width会尽可能的宽，外边距会自动适应为0.

外边距可以设置为一个负数，就会出现字元素的宽度超出父元素的宽度的情况。

这些值可以声明为百分数值，相对于包含块来说。

以上的都是**非替换元素**。对于**替换元素**来说以上的规则同样试用，只有一个就是width的值取auto时，内容区的宽度是内容的固有宽度，
比如img的图片的固定宽度。

### 垂直格式化

元素的默认高度由内容决定，高度还会受内容宽度的影响，段落越窄，相应的就会越高。当高度小于内容所需的高度时，浏览器会提供一种查看内容的
方式，例如滚动条。

和`width`一样，`height`定义了元素框内容的高度，而不是元素框的高度，元素框的高度也是由内容区高度、外边距、内边距、边框组成。

1. 垂直属性

`margin-top`、`border-top`、`padding-top`、`height`、`padding-bottom`、`border-bottom`、`margin-bottom`等7个相关属性。
这7个属性的值必须等于包含块的height。同上只有3个属性可以设置为auto.其他的和水平属性基本相似。

- 合并垂直外边距

垂直相邻外边距的合并。这种合并行为应用于外边距。如果元素有内边距和边框，他们绝对不会合并。

```
  div { margin-top: 10px; margin-bottom: 15px;}

  ul { margin-top: 10px; margin-bottom: 15px; border: 1px solid }

  ul>li { margin-top: 35px; margin-bottom: 35px; }
```
```
  <div>
    this is div
  </div>
  <div>
    this is div
  </div>

  <ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
  </ul>
```

上面这个例子中，`ul`有边框，所以`li`的外边距不会和`div`的外边距合并。`div`会和`ul`的外边距合并。但是如果`ul`没有设置边框的话，
则`li`的外边距也会和`div`的外边距进行合并。

- 负外边距

如果外边距都设置成负值，浏览器则会取两个外边距绝对值的最大值。如果一个外边距设置成负值，另一个设置成正数，则浏览器会使用正数减去
负数的绝对值，得到的就是元素间的距离。

### 列表项

**列表项有一些自身的特殊规则：通常列表项前面有一个标志，这个标志并不是u列表项内容区的一部分**

与一个列表项元素关联的标志可能在列表项内容之外，也可能处理为内容开始处的一个内联标志。这取决于属性`list-style-position`的值。

## 行内元素

几个基本术语概念：  
- 匿名文本：指所有未包含在行内元素中的字符串，空格也是一部分。  
- em框：也称字符框。实际的字形可能比其em框更高或者更矮。
- 内容区：元素中各字符串的em框串在一起组成的框。  
- 行间距：对于非替换元素，元素行内框的高度刚好等于`line-height`的值。对于替换元素，元素行内框的高度恰好等于内容区的高度，因为行间距不能应用到替换元素。  
- 行框：是包含该行中出现的最高点和最低点的最小值。  

### 行内格式化

**`line-height`实际上只影响行内元素和其他行内内容，而不影响块级元素，也可以为一个块级元素设置`line-height`但是这个值只是影响块级元素的内联内容时才会有视觉影响**

### 行内非替换元素

- 建立框：

对于行内非替换元素或匿名文本某一部分，`font-size`值确定了内容区的高度，如果一个行内元素`font-size`
为15px,则内容区的高度就是15px，因为元素中所有的`<em>`框的高度都是15px.

如果一个行内非替换元素的`line-height`是21px,`font-size`是15px，那用户代理就会将这差的6px一半应用到内容区的顶部，一半应用到内容区的底部，这就得到了行内框。

- 行内对齐也会影响行内框的高度


### 行内替换元素

一般认为行内替换元素有固有的高度和宽度。

替换元素可以增加行框的高度但是不影响line-height的值。为行内替换元素增加边距、边框、外边距会增大其行内框。

## 改变元素显示

1. `display`属性：可以用来改变元素角色

取值：`none`、`inline`、`block`、`inline-block`、`list-item`、`run-in`、`table`、`inline-table`、`table-row-group`、`table-header-group`、`table-footer-group`、
`table-row`、`table-column-group`、`table-column`、`table-cell`、`table-caption`、`inherit`

2. 行内块元素：块级框

`run-in`属性元素：

- `run-in`属性可以使某些块级元素成为下一个元素的行内部分。

- `run-in`元素从其原先的父元素继承属性 
 





